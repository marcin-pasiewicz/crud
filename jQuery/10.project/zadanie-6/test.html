<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Zadanie 6 - testy</title>
  <link rel="stylesheet" href="css/qunit-2.0.1.css">
</head>
<body>
  <div id="qunit"></div>
  <div id="qunit-fixture"></div>
  <script src="js/qunit-2.0.1.js"></script>
  <script src="js/jquery-3.1.1.min.js"></script>
  <script>
    (function($) {
      function getFullName(contact) {
        var fullName = '';
        if (!contact || !contact.name) {
          return fullName;
        }
        fullName = contact.name;
        if (!contact.surname) {
          return fullName;
        }
        fullName = contact.name + ' ' + contact.surname;
        return fullName;
      }

      function addContactFromData(key, contact) {
        var fullName = getFullName(contact);
        var $contactButton = $('<a href="#" class="list-group-item">' + fullName + '</a>');
        $('#contact-list').append($contactButton);
        $contactButton.attr('data-id', key);
      }

      function processContacts(contacts) {
        // TODO: Utworz listę kontaktow w elemencie '#contact-list'
        // HINT: posłuż się funkcją addContactFromData
      }

      function init(contacts) {
        $('#contact-list').empty();
        processContacts(contacts);
      }

      QUnit.module('funkcja init', {
        before: function() {
          $('body').append('\
            <ul id="contact-list" class="list-group">\
              <a href="#" class="list-group-item">kontakt 1</a>\
              <a href="#" class="list-group-item">kontakt 2</a>\
            </ul>\
          ');
        },
        after: function() {
          // $('#contact-list').remove();
        }
      });
      QUnit.test( 'funkcja init', function( assert ) {
        assert.equal( typeof init, 'function', 'Funkcja "init" jest zadeklarowana' );
        assert.equal( typeof processContacts, 'function', 'Funkcja "processContacts" jest zadeklarowana' );
        var testContacts = [
          {name: 'a', surname: 'b'},
          {name: 'c', surname: 'd'},
        ];
        init(testContacts);
        var contactListHTML = $('#contact-list').prop('outerHTML');
        var expectedHTML = '<ul id="contact-list" class="list-group"><a href="#" class="list-group-item" data-id="0">a b</a><a href="#" class="list-group-item" data-id="1">c d</a></ul>';
        assert.equal(contactListHTML, expectedHTML, 'Funkcja przetwarza tablicę, wyciągając pola z obiektow');
      });

    }(jQuery));
  </script>
</body>
</html>
